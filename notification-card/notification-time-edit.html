<link rel="import" href="../../iron-input/iron-input.html">
<link rel="import" href="../../paper-checkbox/paper-checkbox.html">

<link rel="import" href="../utility-el/time-input.html">


<dom-module id="notification-time-edit">
  <style>
      /*
      https://codingwithgerwin.blogspot.com/2016/04/polymer-and-hidden-attribute.html
      */
      p[[hidden]]{
          display: none;
      }  
      
  </style>
  <template>
    <!-- 
    i want a checkbox
    and two input tags
    -->
    <paper-checkbox checked='{{enabledInput}}' style="float:left">
        [[day]]
    </paper-checkbox>

    <time-input id="start" enabled="{{enabledInput}}" time="{{start}}" invalid="{{startInvalid}}"></time-input>
    <time-input id="end" enabled="{{enabledInput}}" time="{{end}}" invalid="{{endInvalid}}"></time-input>

  </template>
  <script>
    Polymer({
        is: 'notification-time-edit',
        properties:{
            day:{
                type: String,
                value: "default"
            },
            start:{
                type: String, 
                notify: true,
                reflectToAttribute: true,
                value: "00:00"
            },
            end:{
                type: String,
                notify: true,
                value: "00:00"
            },
            startInvalid:{
                type: Boolean,
                value: false
            },
            endInvalid:{
                type: Boolean,
                value: false
            },
            error:{
                type: Boolean,
                value: true
            }
        },
        observers:[
            'checkInput(start, end)'
        ],
        attached: function(){
            this._disableCheck();
        },
        checkInput: function(start, end){
            console.log("checkInput got fired");
            var regularExpress = /[:]/;
            start = start.replace(regularExpress, "");
            end = end.replace(regularExpress, "");
            if(start > end){
                this.startInvalid =  true;
                this.endInvalid = true;
            }
            else{
                this.startInvalid =  false;
                this.endInvalid = false;
            }
        },
        _disableCheck: function(){
            if(this.start == "00:00" && this.end == "00:00"){
                this.enabledInput = false;
            }
            else{
                this.enabledInput = true;
            }
        }

        
        
    });
  </script>
</dom-module>
