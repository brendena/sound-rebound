<link rel="import" href="../../paper-card/paper-card.html">  
<link rel="import" href="../../paper-toggle-button/paper-toggle-button.html">
<link rel="import" href="../../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../iron-icon/iron-icon.html">
<link rel="import" href="../../iron-icons/iron-icons.html">

<!--

<link rel="import" href="./priority-selector.html">
<link rel="import" href="./notification-times.html">
-->

<!-- 
To DO

i need to change the way the notification get activated.
Currently they just toggle everthing, they don't check to see the value

So we'll use words insteed of images
So active notification will turn the words green if there on and red if there not



-->

<dom-module id="notification-card">
  <style is="custom-style">
    paper-card.disabled{
      background: rgba(208, 208, 208, 0.79);
    }
    /*
    I like the idea of just scalling everthing for desktop
    but the problem is that the auto div or paper-card doesn't 
    retain the size
    paper-card{
      transform: scale(2,2);
    }
    */
  </style>
  <template>
   
    <paper-card id="paperCard">
      <div class="card-content">
        <div >[[soundInfo.name]]
                                                                                                                  <!-- can't edit -->
            <paper-icon-button id="buttonLaunchNotificationEdit" on-tap="launchNotificationEdit" icon="create" disabled="{{soundInfo.disabledNotificaiton}}"></paper-icon-button>
            <paper-toggle-button id="disableToggle" on-tap="toggleDisable" checked="{{soundInfo.disabledNotificaiton}}" >disable</paper-toggle-button>
            <paper-toggle-button on-tap="toggleActiveNotification" checked="[[soundInfo.repeatingNotification]]" disabled>repeating notification</paper-toggle-button>
            <p> active notification</p>
        </div>
        <div>
          <p>[[soundInfo.sensitivity]]</p>
            <!--<priority-selector certainty="{{soundInfo.sensitivity}}"></priority-selector> -->
        </div>
      </div>

      <!--
      <div class="card-actions">
          
          <notification-times notification-dates="[[soundInfo.notificationDates]]"></notification-times>
          
      </div>
      -->
    
    </paper-card>
    
        
        
  </template>
  <script>
    Polymer({
        is: 'notification-card',
        ready: function(){
            console.log(this.soundInfo);
            this.soundInfo = {
              name: "default",
              sensitivity: 0,
              notificationDates: [],
              repeatingNotification: false,
              disabledNotificaiton: false
            } 
        },
        attached: function(){
          this._disabledLogic();
        },
        properties:{
            soundInfo:{
                type: Object,
                reflectToAttribute: true
            }
            
            
        },
        /**
          This get called on #disableToggle and will add the class of disable 
          and change the property of the soundInfo.disabledNotification by calling a event

          @event toggleDisable
        */

        toggleDisable:function(){
            this._disabledLogic();
            this.soundInfo.disabledNotificaiton = !this.soundInfo.disabledNotificaiton;

            //fire event
        },
        /**
          
        */
        _disabledLogic:function(){
          if(this.soundInfo.disabledNotificaiton){
            this.classList.add('disabled');
            this.$.paperCard.classList.add('disabled')
          } 
          else{
            this.classList.remove('disabled');
            this.$.paperCard.classList.remove('disabled')
          }
        },
        launchNotificationEdit:function(){
            this.fire('editNotification', {sound: this.soundInfo});
        }
        
        
    });
  </script>
</dom-module>